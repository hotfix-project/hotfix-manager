webpackJsonp([7,3],{31:function(t,s,e){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(s,"__esModule",{value:!0});var i=e(1),n=(a(i),e(5)),r=a(n),o=e(3),l=a(o),c=(e(2),e(4));s.default={name:"v-app",created:function(){this.getAppDetail(),this.getSystems(),this.getCategorys()},data:function(){return{versionsList:"",appList:"",name:"",dialogFlag:!1,secretFlag:!0,categorysList:"",systemsList:"",id:"",rsaFlag:!1,rsa:""}},watch:{},computed:{},methods:{getCategorys:function(){var t=this;this.$http.get(l.default.categorys).then(function(s){t.categorysList=s.body.results})},getSystems:function(){var t=this;this.$http.get(l.default.systems).then(function(s){200==s.status&&(t.systemsList=s.body.results)})},getAppDetail:function(){this.id=decodeURIComponent((0,c.queryString)("id"));var t=this;this.$http.get(l.default.apps).then(function(s){t.appList=s.body.results,"null"==t.id&&(t.id=t.appList[0].id),t.getVersionList()}).catch(function(t){console.log(t)})},cancel:function(){this.dialogFlag=!1,this.$overlay({show:!1})},addVersion:function(){this.$overlay(),this.dialogFlag=!0},getVersionList:function(){var t=this;t.$http({url:l.default.versions+"?app_id="+this.id,method:"get"}).then(function(s){t.versionsList=s.body.results})},saveVersion:function(){var t=this;t.$http({url:l.default.versions,method:"post",body:{name:this.name,app_id:l.default.apps+"/"+this.$refs.input1.value}}).then(function(s){201==s.status&&(t.cancel(),t.getVersionList())})},inquireSystem:function(t,s){var t=t.match(/^.+\/(\d+)$/)[1];if(s.id==t)return!0},checkFile:function(){for(var t=0;t<this.appList.length;t++)this.appList[t].name==this.name&&(this.rsa=this.appList[t].rsa);this.$overlay(),this.rsaFlag=!0},close:function(){this.$overlay({show:!1}),this.rsaFlag=!1},aa:function(){console.log(this.$refs.input1.value)}},components:{"c-footer":r.default},filters:{filterTime:function(t){return t.replace(/[^0-9:-]/g," ")}}}},66:function(t,s,e){var a,i;e(133),a=e(31);var n=e(137);i=a=a||{},"object"!=typeof a.default&&"function"!=typeof a.default||(i=a=a.default),"function"==typeof i&&(i=i.options),i.render=n.render,i.staticRenderFns=n.staticRenderFns,i._scopeId="data-v-2ac63394",t.exports=a},133:function(t,s){},137:function(t,s){t.exports={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",[e("div",{staticClass:"f22 pl20"},[t._v("应用管理")]),t._v(" "),e("div",{staticClass:"wrap"},t._l(t.appList,function(s){return e("table",{directives:[{name:"show",rawName:"v-show",value:s.id==t.id,expression:"item.id==id"}],staticClass:"details",attrs:{cellpadding:"0",cellspacing:"0"}},[e("tr",[e("td",{staticClass:"w21"},[t._v("应用名称："+t._s(s.name))]),t._v(" "),t._l(t.categorysList,function(a){return e("td",{directives:[{name:"show",rawName:"v-show",value:t.inquireSystem(s.category_id,a),expression:"inquireSystem(item.category_id,item1)"}],staticClass:"w25"},[t._v("应用类型："+t._s(a.name))])}),t._v(" "),t._l(t.systemsList,function(a){return e("td",{directives:[{name:"show",rawName:"v-show",value:t.inquireSystem(s.system_id,a),expression:"inquireSystem(item.system_id,item2)"}],staticClass:"w21"},[t._v("发布平台："+t._s(a.name))])}),t._v(" "),e("td",[t._v("App ID："+t._s(s.id))])],2),t._v(" "),e("tr",[e("td",[t._v("RSA秘钥："),e("i",{staticClass:"blue cursor",on:{click:t.checkFile}},[t._v("查看文件")])]),t._v(" "),e("td",{attrs:{colspan:"2"}},[t._v("App Key："+t._s(s.key))]),t._v(" "),e("td",[t._v("App Secret："),t.secretFlag?e("span",{staticClass:"cursor",on:{click:function(s){t.secretFlag=!1}}},[t._v("************************")]):e("span",{staticClass:"word-break"},[t._v(t._s(s.secret))])])])])})),t._v(" "),e("div",{staticClass:"btn cursor",on:{click:t.addVersion}},[t._v("新增版本")]),t._v(" "),e("div",{staticClass:"wrap"},[e("table",{staticClass:"version",attrs:{cellpadding:"0",cellspacing:"0"}},[t._m(0),t._l(t.versionsList,function(s){return e("tr",[e("td",[t._v(t._s(s.name))]),t._v(" "),e("td",[t._v(t._s(t._f("filterTime")(s.create_time)))]),t._v(" "),e("td",[e("router-link",{staticClass:"blue",attrs:{to:"details?appId="+t.id+"&versionId="+s.id}},[t._v("查看详情")])],1)])}),t._v(" "),e("tr",{directives:[{name:"show",rawName:"v-show",value:0==t.versionsList.length,expression:"versionsList.length==0"}]},[e("td",{staticClass:"tc",attrs:{colspan:"3"}},[t._v("请先新增版本！")])])],2)])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.dialogFlag,expression:"dialogFlag"}],staticClass:"modal"},[e("div",{staticClass:"modal-inner"},[t._m(1),t._v(" "),e("div",{staticClass:"modal-text"},[e("div",{attrs:{"data-v-aebaf62a":""}},[e("form",[e("div",{staticClass:"pt20"},[e("label",[t._v("*App Id:")]),t._v(" "),e("select",{ref:"input1",staticClass:"cursor",attrs:{name:""},on:{change:t.aa}},t._l(t.appList,function(s){return e("option",{attrs:{value:""},domProps:{value:s.id}},[t._v(t._s(s.name))])}))]),t._v(" "),e("div",{staticClass:"pt20 pb20"},[e("label",[t._v("*版本号:")]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",name:"name",placeholder:"请输入版本号"},domProps:{value:t.name},on:{input:function(s){s.target.composing||(t.name=s.target.value)}}})])])])])]),t._v(" "),e("div",{staticClass:"modal-buttons"},[e("span",{staticClass:"modal-button cursor",on:{click:t.saveVersion}},[t._v("确定")]),t._v(" "),e("span",{staticClass:"modal-button cursor modal-button-cancel",on:{click:t.cancel}},[t._v("取消")])])]),t._v(" "),e("div",{directives:[{name:"show",rawName:"v-show",value:t.rsaFlag,expression:"rsaFlag"}],staticClass:"resDialog f16"},[e("span",{staticClass:"resBox"},[t._v(t._s(t.rsa))]),t._v(" "),e("span",{staticClass:"abs blue close",on:{click:t.close}},[t._v("关闭")])])])},staticRenderFns:[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("tr",[e("th",{staticClass:"w21"},[t._v("版本号")]),t._v(" "),e("th",{staticClass:"w52"},[t._v("创建时间")]),t._v(" "),e("th",[t._v("操作")])])},function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"modal-title"},[e("div",{attrs:{"data-v-aebaf62a":""}},[t._v("创建应用")])])}]}}});
//# sourceMappingURL=app.8a525f20.js.map